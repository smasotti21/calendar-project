---
output: md_document
always_allow_html: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r, eval=FALSE, include=FALSE}

```

# Diary of a Data Science Student
## How to Avoid Cabin Fever in the age of COVID-19
### How do I intend to spend my time? How do I actually spend my time?

Motivation + primary questions of interest

COVID-19 

I can include an image (not created in R) like this:

![cute puppy](~/git/calendar-project/cute_puppy.png)

Create a "img" folder within your calendar-project repo and store the image files there.

# Data collection

I collected data by . . . 

1. Creating two separate google calendars, one titled "Intended Schedule", and one titled "Actual Schedule".
2. Logging the activity for my "intended schedule" for each day every morning when I woke up.
3. Logging the activity for my "actual schedule" every time I finshed completing an activity.

I wrangled the data by . . .

1. Importing the calendars as data frames from google calendar into RStudio
2. Creating variables for length of time spent on activities, category of activity, etc.
3. Assigning specific activities to broader categories for classification.


# Results

And here are my results . . .

## Initial round of visualizations 
### How much time did I intend to spend each day on each activity?
### How much time did I actually spend each day on each activity?

```{r}
# intersperse relevant figures and text
# the "include=FALSE" code chunk option suppresses the code and the output from this chunk from appearing in the knit file
# please include your import of the data and any wrangling here
library(tidyverse)
library(lubridate)
library(ical)
library(dplyr)

   
#importing intended calendar
intended_calendar <- ical_parse_df(file = "~/git/Personal-repository/Data_Science_Final_Project/Intended_Schedule/intended_smasotti21@gmail.com.ics") %>%
mutate(start_datetime = with_tz(start, tzone = "America/New_York")
, end_datetime = with_tz(end, tzone = "America/New_York")
, length_min = end_datetime - start_datetime
, length_hrs = length_min/60
, date = floor_date(start_datetime, unit = "day"))

#importing actual calendar
actual_calendar <- ical_parse_df(file = "/Users/stephaniemasotti/git/Personal-repository/Data_Science_Final_Project/actual.ics") %>%
mutate(start_datetime = with_tz(start, tzone = "America/New_York")
, end_datetime = with_tz(end, tzone = "America/New_York")
, length_min = end_datetime - start_datetime
, length_hrs = length_min/60
, date = floor_date(start_datetime, unit = "day"))

#wrangling data 


# tidy intended 
tidy_intended_calendar <- intended_calendar %>%
  filter(start >= "2020-04-13 09:30:00") %>%
  select(-uid, -last.modified, -status, -start_datetime, -end_datetime, -description) %>%
  mutate(schedule = "intended")

# tidy intended categories 
tidy_intended_categories <- tidy_intended_calendar %>%
  filter((summary != "Sleep ")) %>%
  filter((summary != "Sleep")) %>%
  mutate(category = case_when((str_detect(summary, "HW"))~"School/work", 
         (str_detect(summary, "Class"))~"School/work", 
         (str_detect(summary, "class"))~"School/work", 
         (str_detect(summary, "classes"))~"School/work",
         (str_detect(summary, "Schedule"))~"School/work",
         (str_detect(summary, "schedule"))~"School/work",
         (str_detect(summary, "Organize"))~"School/work",
         (str_detect(summary, "Meeting"))~"School/work",
         (str_detect(summary, "meeting"))~"School/work",
         (str_detect(summary, "emails"))~"School/work",
         (str_detect(summary, "Emails"))~"School/work",
         (str_detect(summary, "Phone"))~"School/work",
         (str_detect(summary, "Lunch"))~"Meal", 
         (str_detect(summary, "Dinner"))~"Meal", 
         (str_detect(summary, "Breakfast"))~"Meal", 
         (str_detect(summary, "Brunch"))~"Meal",
         (str_detect(summary, "Exercise"))~"Exercise", 
         (str_detect(summary, "art"))~"Art",
         (str_detect(summary, "Art"))~"Art",
         (str_detect(summary,"Practice Piano"))~"Practice Piano", 
         (str_detect(summary, "Read"))~"Read", 
         (str_detect(summary, "Watch Lylah"))~"Watch Lylah", 
         (str_detect(summary, "Bike Ride"))~"Exercise", 
         (str_detect(summary, "Yoga"))~"Exercise",
         (str_detect(summary, "Zoom with friends"))~"Zoom with friends",
         (str_detect(summary, "movie"))~"Watch Movie/Show", 
         (str_detect(summary, "Show"))~"Watch Movie/Show", 
         (str_detect(summary, "Office hours"))~"School/work", 
         (str_detect(summary, "Office Hours"))~"School/work", 
         (str_detect(summary, "Bake"))~"Bake", 
         (str_detect(summary, "Sew"))~"Sew", 
         (str_detect(summary, "Clean"))~"Chores"))%>%
         mutate(total_min_day = 1440) %>%
         mutate(total_min_week = 10080)



#tidy actual 
tidy_actual_calendar <- actual_calendar %>%
  filter(start >= "2020-04-13 09:30:00") %>%
  select(-uid, -last.modified, -status, -start_datetime, -end_datetime, -description) %>%
  mutate(schedule = "actual") %>%
  filter(start < "2020-04-21 01:30:00")

#tidy actual categories 
tidy_actual_categories <- tidy_actual_calendar %>%
    filter((summary != "Sleep ")) %>%
    filter((summary != "")) %>%
    mutate(category = case_when((str_detect(summary, "HW"))~"School/work", 
         (str_detect(summary, "Exam"))~"School/work",
         (str_detect(summary, "emails"))~"School/work",
         (str_detect(summary, "Emails"))~"School/work",
         (str_detect(summary, "Schedule"))~"School/work",
         (str_detect(summary, "schedule"))~"School/work",
         (str_detect(summary, "Meeting"))~"School/work",
         (str_detect(summary, "meeting"))~"School/work",
         (str_detect(summary, "Phone"))~"School/work",
         (str_detect(summary, "Class"))~"School/work", 
         (str_detect(summary, "Clean"))~"Chores", 
         (str_detect(summary, "Schedule"))~"School/work",
         (str_detect(summary, "Dinner"))~"Meal", 
         (str_detect(summary, "Lunch"))~"Meal", 
         (str_detect(summary, "Breakfast"))~"Meal", 
         (str_detect(summary, "Brunch"))~"Meal",
         (str_detect(summary, "Exercise"))~"Exercise", 
         (str_detect(summary, "art"))~"Art",
         (str_detect(summary, "Art"))~"Art",
         (str_detect(summary,"Practice Piano"))~"Practice Piano", 
         (str_detect(summary, "Read"))~"Read", 
         (str_detect(summary, "Watch Lylah"))~"Watch Lylah", 
         (str_detect(summary, "Bike Ride"))~"Exercise", 
         (str_detect(summary, "Yoga"))~"Exercise",
         (str_detect(summary, "Zoom with friends"))~"Zoom with friends",
         (str_detect(summary, "movie"))~"Watch Movie/Show", 
         (str_detect(summary, "Movie"))~"Watch Movie/Show", 
         (str_detect(summary, "Show"))~"Watch Movie/Show", 
         (str_detect(summary, "Office hours"))~"School/work", 
         (str_detect(summary, "Office Hours"))~"School/work", 
         (str_detect(summary, "classes"))~"School/work", 
         (str_detect(summary, "Bake"))~"Bake", 
         (str_detect(summary, "Sew"))~"Sew")) %>%
         mutate(total_min_day = 1440) %>%
         mutate(total_min_week = 10080)

# first visualization of how time was spent vs day of the week - facet by category 
#intended
library(dplyr)
intended_results_daily <- tidy_intended_categories %>%
  group_by(date, category) %>%
  summarize(length_min_daily = sum(length_min))

ggplot(intended_results_daily, aes(x = date, y = length_min_daily
                                   , fill = category)) +
  geom_col() +
  theme(axis.text.x = element_text(angle = 60, hjust = 1)) +
  theme(text=element_text(family="Georgia")) +
  labs(title = "How I intended to spend my time",
       x = "Day",
       y = "Time (Minutes)")

#actual
actual_results_daily <- tidy_actual_categories %>%
  group_by(date, category) %>%
  summarize(length_min_daily = sum(length_min))

ggplot(actual_results_daily, aes(x = date, y = length_min_daily
                                   , fill = category)) +
  geom_col() +
  theme(axis.text.x = element_text(angle = 60, hjust = 1)) +
  theme(text=element_text(family="Georgia")) +
  labs(title = "How I actually spent my time",
       x = "Day",
       y = "Time (Minutes)")

#with polar 
ggplot(intended_results_daily, aes(x = date, y = length_min_daily
                                   , fill = category)) +
  geom_col() +
  coord_polar() +
  theme(axis.text.x = element_text(angle = 60, hjust = 1)) +
  theme(text=element_text(family="Georgia")) +
  labs(title = "How I intended to spend my time",
       x = "Day",
       y = "Time (Minutes)")

#with polar 
ggplot(actual_results_daily, aes(x = date, y = length_min_daily
                                   , fill = category)) +
  geom_col() +
  coord_polar() +
  theme(axis.text.x = element_text(angle = 60, hjust = 1)) +
  theme(text=element_text(family="Georgia")) +
  labs(title = "How I actually spent my time",
       x = "Day",
       y = "Time (Minutes)")





#second visualization 
#intended
ggplot(intended_results_daily, aes(date, length_min_daily, fill = category)) +
  facet_wrap("category") +
  geom_col() +
  theme(axis.text.x = element_text(angle = 60, hjust = 1)) +
  theme(text=element_text(family="Georgia", size=12)) +
  labs(title = "How I intended to spend my time", 
       x = "Day",
       y = "Time (Minutes)")

#actual
ggplot(actual_results_daily, aes(date, length_min_daily, fill = category)) +
  facet_wrap("category") +
  geom_col() +
  theme(axis.text.x = element_text(angle = 60, hjust = 1)) +
  theme(text=element_text(family="Georgia", size=12)) +
  labs(title = "How I actually spent my time", 
       x = "Day",
       y = "Time (Minutes)")


#polar 
ggplot(intended_results_daily, aes(date, length_min_daily, fill = category)) +
  theme(text=element_text(family="Georgia", size=12)) +
  facet_wrap("category") +
  coord_polar() +
  geom_col() +
  labs(title = "How I intended to spend my time", 
       x = "Day",
       y = "Time (Minutes)")


#polar 
ggplot(actual_results_daily, aes(date, length_min_daily, fill = category)) +
  theme(text=element_text(family="Georgia", size=12)) +
  facet_wrap("category") +
  coord_polar() +
  geom_col() +
  labs(title = "How I actually spent my time", 
       x = "Day",
       y = "Time (Minutes)")

```
